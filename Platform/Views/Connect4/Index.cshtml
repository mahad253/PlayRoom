@{
    ViewData["Title"] = "Puissance 4";
    var lobbyId = Context.Request.Query["lobbyId"].ToString();
    bool hasLobby = !string.IsNullOrWhiteSpace(lobbyId);
}
@section Styles {
    <link rel="stylesheet" href="~/css/connect4.css" asp-append-version="true" />
}

<div class="connect4-index-page">
  <div class="connect4-card">
    <div class="connect4-card-header">
      <h2 class="connect4-title">Puissance 4</h2>
      <p class="connect4-subtitle mb-0">
        @(hasLobby ? "Rejoins une partie existante" : "Crée une nouvelle partie en 1 clic")
      </p>
    </div>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">@TempData["Error"]</div>
    }

    @if (hasLobby)
    {
        <div class="alert alert-info">
            Rejoindre la partie : <b>@lobbyId</b>
        </div>
    }

    <form method="post" asp-action="@(hasLobby ? "Join" : "Create")" class="mt-4">
        @if (hasLobby)
        {
            <input type="hidden" name="lobbyId" value="@lobbyId" />
        }

        <div class="mb-3 text-left">
            <label class="form-label connect4-label">Pseudo</label>
            <input name="pseudo"
                   class="form-control connect4-input"
                   required minlength="2" maxlength="20"
                   placeholder="Ton pseudo…"
                   autocomplete="nickname" />
        </div>

        <button class="btn btn-dark w-100 connect4-primary-btn">
            <span class="mr-2">@(hasLobby ? "Rejoindre" : "Créer une partie")</span>
            <i class="fas fa-arrow-right"></i>
        </button>
    </form>

    <div class="connect4-hint mt-3">
  <i class="fas fa-gamepad mr-1"></i>
  Choisis un pseudo. À toi de jouer.
</div>

  </div>
</div>
